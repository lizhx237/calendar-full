# 从头开始打包部署

```
npm init vite
cnpm install
```

修改 vite.config.js 的 defineConfig 方法，改成这样：

```js
export default defineConfig({
  plugins: [vue()],
  base: "./",
});
```

```
npm run build
```

得到 `index.html` ，一个命名很奇怪的 js 代码和一个命名很奇怪的 css 代码，均位于 dist 文件夹。

```
cnpm install electron electron-builder -D
```

main.js

```js
import { app, BrowserWindow } from "electron/main";

const createWindow = () => {
  const win = new BrowserWindow({
    width: 800,
    height: 600,
  });

  win.loadFile("./dist/index.html");
};

app.whenReady().then(() => {
  createWindow();

  app.on("activate", () => {
    if (BrowserWindow.getAllWindows().length === 0) {
      createWindow();
    }
  });
});

app.on("window-all-closed", () => {
  if (process.platform !== "darwin") {
    app.quit();
  }
});
```

在项目根目录创建 `electron.config.json` 。备注： `"files": ["./**/*"]` 也是可以的。

```json
{
  "files": ["main.js", "./dist"],
  "productName": "SimpleCalendar",
  "directories": {
    "output": "build/"
  }
}
```

package.json

```json
{
  "name": "calendar-full",
  "version": "0.0.0",
  "private": true,
  "main": "main.js",
  "type": "module",
  "scripts": {
    "dev": "vite",
    "build": "vite build",
    "preview": "vite preview",
    "start": "electron .",
    "electron-build": "vite build & electron-builder --config electron.config.json"
  },
  "dependencies": {
    "vue": "^3.5.13"
  },
  "devDependencies": {
    "@vitejs/plugin-vue": "^5.2.3",
    "electron": "^36.2.1",
    "electron-builder": "^26.0.12",
    "vite": "^6.2.4",
    "vite-plugin-vue-devtools": "^7.7.2"
  }
}
```
